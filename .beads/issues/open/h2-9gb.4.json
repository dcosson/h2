{
  "id": "h2-9gb.4",
  "title": "Update dry-run to use AgentType methods instead of hardcoded Claude flags",
  "description": "dry_run.go resolveAgentConfig() hardcodes Claude flags (--session-id, --append-system-prompt, --model, --permission-mode, --allowedTools, --disallowedTools) and CLAUDE_CONFIG_DIR env var. Fix:\n\n1. Resolve AgentType from command string (agent.ResolveAgentType)\n2. Call BuildCommandArgs(cfg) for child args instead of hardcoding\n3. Call BuildCommandEnvVars(h2Dir, roleName) for env vars instead of hardcoding\n4. In printDryRun display: truncate any arg value over a certain length generically, instead of matching --append-system-prompt and --system-prompt by name\n\nDepends on h2-9gb.2 (BuildCommandEnvVars) and h2-9gb.3 (EnsureConfigDir).",
  "status": "open",
  "priority": 1,
  "type": "task",
  "parent": "h2-9gb",
  "dependencies": [
    {
      "id": "h2-9gb",
      "type": "parent-child"
    },
    {
      "id": "h2-9gb.2",
      "type": "blocks"
    },
    {
      "id": "h2-9gb.3",
      "type": "blocks"
    }
  ],
  "created_by": "Danny Cosson",
  "owner": "dcosson@gmail.com",
  "created_at": "2026-02-20T08:26:56.405589-08:00",
  "updated_at": "2026-02-20T08:26:56.405589-08:00"
}
